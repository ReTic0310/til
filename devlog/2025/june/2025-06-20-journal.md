# 📓 2025-6-18 Journal

## 🔨 今日取り組んだこと
- チーム機能の実装

## 🎉 成果
- チーム機能の実装
  - テーブル構造の定義
  - モデル定義(GraphQL)
  - スキーマ定義(GraphQL)

## 🚧 未成果
- チーム機能の残りの部分の実装
  - アーキテクチャ
  - DataLoader

## 💡 学んだこと・気づいたこと
- Github
  - branchを切ってcheckoutするコマンドの復習
    - ```git checkout -b <新しいブランチ名>```
  - リモートの最新状態をローカルに取り組む方法の復習
    - ```git fetch ...```
  - ```rebase```の使い方
    - ブランチのコミット履歴を別のベースの上に載せ替えることができるコマンド = 歴史のスタート場所をずらすみたいな感じ
    - rebaseしたいbranchにcheckoutして```git rebase main```ってするとmainの最新の状態にスタート場所をずらせる
  - コミットの詳細情報の確認方法
    - ```git show <id>```でコミットメッセージ + 差分が見れる
  - コマンドは省略できる
    - 例えば...
    - ```git pull``` = ```gpull```といった具合に、とても便利になる
- SQL
  - 外部キーをテーブルに関連づける方法
    - 制約を使うといい
      - ```Foreign Key```でも外部キーは登録できる
      - メンテナンス性が制約の方が高い
        - ログやエラーで制約名が出るのでどこのエラーなのかなどがわかりやすくなる
        - 他のチームメンバーにも意図が伝わりやすい
      - 構文の意味
        - ```CONSTRAINT <制約名>```
          - 外部キー制約(FK)の名前を決める部分
        - ```FOREIGN KEY (子テーブル内の外部キーを格納するカラム名)```
          - 子テーブル側で"このカラムが外部キーだよ"と宣言する部分
        - ```REFERENCES <親テーブル名>(親テーブルの外部キーに該当するカラム名)```
          - 参照先のテーブルとカラムを指定する
        - ```ON DELETE CASCADE```
          - 親レコードが削除された時の振る舞いを定義
    - ```On Delete Cascade```と```On Update Cascade```の意味
      - On Delete : 親レコードが削除された時に子テーブルの該当する行も自動で削除する
      - On Update : 親テーブルの主キーが生成後に変化した際に子テーブルの外部キーも追従するようにする
- GraphQL
  - モデル定義
    - ID!について
      - GraphQL側ですでに組み込まれているスカラー型
      - オブジェクトを一意に識別するためのフィールドとして使う型
    - 配列の非nullについて
      - 配列も非null、配列内のデータも非nullにしたい場合は```[User!]!```とする
      - どちらが必須なのか、それとも全て必須なのかは状況に応じて変わるので!を入れるかどうかは考えて使い分ける
  - スキーマ定義
    - Mutationについて
      - inputはMutationの種類ごとに定義するべきか
        - A.操作内容が同じならまとめ、異なるなら別々で作るべき
        - 基本はMutationごとにinputを作成するのが定石
        - 将来の拡張性が高まる
      - 名前の付け方
        - ```<Action><Entity>Input```が無難
        - 動詞を先頭にすると「何をするための入力」なのかがわかりやすい
    - ロジックについて
      - ```Update...```といったMutationを作る際に、**差分**で更新する方法か**上書き**で更新する方法かどちらの方がいいのか
        - 今回のSports-dayにおけるチーム機能は**差分**で更新するべき
        - なんで？
          - 異なる人が別のタイミングで更新する際、例えばAさんがある人をチームから削除したとして、Bさんがページを最新状態にせず別の人をチームに追加するとした場合、上書き更新だとAさんが行なった操作がなかったことになってしまう
          - 実装は上書きと比較すると複雑になるけど、データの整合性が保たれる
    - コメントについて
      - GraphQLではフロントとバックを繋ぐシステムであるため、できるだけコメント(ドキュメントになる)を細かく書くべき
      - ```"""コメント"""```で記入できる


## 💭 疑問に思ったこと・気になったこと
- GraphQL
  - Mutationについて
    - Updateの機能を実装するときのデータのnull許容する場合としない場合の厳格な判断ができない
    - どう考えるとわかりやすいのだろうか
- Git
  - 他の省略コマンドが気になる

## 🏅 成功点
- gitの新しい使い方や機能を知れた
- 明らかに初めの頃よりもBackEndの構築手順が理解できている
  - 前回より滑らかに実装ができる
- 選択肢が出てきた場合に書き出してしっかりと比較し考えれた

## 🤔 反省点
- 自分から比較しようといった考え方に慣れない
  - いっぱい考えて慣れてくしかない
- 体力がない
- 集中力が落ちやすい

## 🔧 改善点
- たくさんコードを書いたりしながら分岐点が出てきたらとりあえず書き出して考えてみる
  - 手を動かそう
- 集中力が高まるように少し運動などをするといいかも知れない
- テキパキ動けるように上手い気持ちの切り替え方を自分なりに作っておく
  - 「この動画を見たら1時間は集中する。」みたいな感じ

## 🚀 次の目標
- チーム機能の実装を終わらせる
- チームメンバーのわからないことを教える
